<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Translation Management System</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
        .progress-ring { transform: rotate(-90deg); }
        .progress-ring__circle { stroke-dasharray: 251.2; stroke-dashoffset: 251.2; transition: stroke-dashoffset 0.35s; }
        .diff-added { background-color: #d4edda; color: #155724; }
        .diff-removed { background-color: #f8d7da; color: #721c24; }
        .sidebar-item { transition: all 0.2s ease; }
        .sidebar-item:hover { background-color: rgba(255,255,255,0.1); }
        .sidebar-item.active { background-color: rgba(255,255,255,0.2); border-left: 4px solid #fff; }
        
        /* Virtual scrolling styles */
        .virtual-scroll-container::-webkit-scrollbar {
            width: 8px;
        }
        .virtual-scroll-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        .virtual-scroll-container::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        .virtual-scroll-container::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* Line clamp for text truncation */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* Responsive improvements */
        html, body {
            overflow-x: hidden;
            max-width: 100vw;
        }
        
        /* Ensure main content doesn't push sidebar */
        main {
            min-width: 0;
            width: 100%;
        }
        
        /* Responsive tables */
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        @media (max-width: 768px) {
            .overflow-x-auto {
                margin-left: -1rem;
                margin-right: -1rem;
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            table {
                min-width: 100%;
            }
            
            /* Adjust padding on mobile */
            .p-6 {
                padding: 1rem;
            }
            
            /* Ensure sidebar stays fixed width */
            #sidebar {
                width: 16rem !important;
                min-width: 16rem !important;
                max-width: 16rem !important;
            }
        }
        
        /* Prevent horizontal scroll on main content */
        .tab-content {
            max-width: 100%;
            overflow-x: hidden;
        }
        
        /* Layout structure */
        .flex-col.h-screen {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        
        /* Fixed layout for desktop */
        @media (min-width: 1024px) {
            #sidebar {
                position: relative;
                flex-shrink: 0;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="flex flex-col h-screen">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg flex-shrink-0 relative z-50">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <i class="fas fa-language text-2xl"></i>
                    <h1 class="text-2xl font-bold">Translation Management System</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-sm opacity-90">Total Locales: <span id="total-locales">--</span></span>
                    <span class="text-sm opacity-90">Total Keys: <span id="total-keys">--</span></span>
                    <button id="refresh-btn" class="bg-white bg-opacity-20 hover:bg-opacity-30 px-4 py-2 rounded-lg transition-all">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
            </div>
        </div>
    </header>

    <div class="flex flex-1 overflow-hidden relative">
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="fixed top-4 left-4 z-50 lg:hidden bg-white p-2 rounded-lg shadow-lg">
            <i class="fas fa-bars text-gray-700"></i>
        </button>
        
        <!-- Sidebar -->
        <nav id="sidebar" class="w-64 min-w-[16rem] max-w-[16rem] gradient-bg text-white shadow-lg transform -translate-x-full lg:translate-x-0 transition-transform duration-300 z-40 overflow-y-auto lg:relative lg:transform-none absolute top-0 left-0 h-full">
            <div class="p-6">
                <div class="flex justify-end items-center mb-4 lg:hidden">
                    <button id="close-sidebar">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <ul class="space-y-2">
                    <li><a href="#dashboard" class="sidebar-item active block p-3 rounded-lg" data-tab="dashboard">
                        <i class="fas fa-tachometer-alt mr-3"></i> Dashboard
                    </a></li>
                    <li><a href="#locales" class="sidebar-item block p-3 rounded-lg" data-tab="locales">
                        <i class="fas fa-globe mr-3"></i> Locale Manager
                    </a></li>
                    <li><a href="#translations" class="sidebar-item block p-3 rounded-lg" data-tab="translations">
                        <i class="fas fa-language mr-3"></i> Translation Editor
                    </a></li>
                    <li><a href="#ai-translate" class="sidebar-item block p-3 rounded-lg" data-tab="ai-translate">
                        <i class="fas fa-robot mr-3"></i> AI Translation
                    </a></li>
                    <li><a href="#tools" class="sidebar-item block p-3 rounded-lg" data-tab="tools">
                        <i class="fas fa-tools mr-3"></i> Translation Tools
                    </a></li>
                    <li><a href="#untranslatable" class="sidebar-item block p-3 rounded-lg" data-tab="untranslatable">
                        <i class="fas fa-ban mr-3"></i> Untranslatable
                    </a></li>
                    <li><a href="#orphaned" class="sidebar-item block p-3 rounded-lg" data-tab="orphaned">
                        <i class="fas fa-unlink mr-3"></i> Orphaned Translations
                    </a></li>
                    <li><a href="#jsx-cleanup" class="sidebar-item block p-3 rounded-lg" data-tab="jsx-cleanup">
                        <i class="fas fa-code mr-3"></i> JSX Cleanup
                    </a></li>
                </ul>
            </div>
        </nav>
        
        <!-- Overlay for mobile -->
        <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden"></div>

        <!-- Main Content -->
        <main class="flex-1 p-4 lg:p-6 overflow-y-auto overflow-x-hidden">
            <!-- Dashboard Tab -->
            <div id="dashboard-tab" data-tab="dashboard" class="tab-content">
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-8">
                    <!-- Stats Cards -->
                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-blue-500 text-white">
                                <i class="fas fa-globe text-2xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700">Total Locales</h3>
                                <p class="text-3xl font-bold text-blue-600" id="dashboard-locales">--</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-green-500 text-white">
                                <i class="fas fa-check-circle text-2xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700">Translated Keys</h3>
                                <p class="text-3xl font-bold text-green-600" id="dashboard-translated">--</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg shadow-lg p-6 card-hover">
                        <div class="flex items-center">
                            <div class="p-3 rounded-full bg-red-500 text-white">
                                <i class="fas fa-exclamation-triangle text-2xl"></i>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-semibold text-gray-700">Missing Translations</h3>
                                <p class="text-3xl font-bold text-red-600" id="dashboard-missing">--</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Translation Progress by Locale -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">Translation Progress by Locale</h2>
                    <div id="locale-progress-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <!-- Progress cards will be populated here -->
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">Quick Actions</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <a href="?page=ai-translate" class="block p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-all">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-purple-500 text-white">
                                    <i class="fas fa-robot text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-semibold text-gray-800">AI Translation</h3>
                                    <p class="text-sm text-gray-600">Translate with Claude Code</p>
                                </div>
                            </div>
                        </a>
                        <a href="?page=orphaned" class="block p-4 bg-red-50 hover:bg-red-100 rounded-lg transition-all">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-red-500 text-white">
                                    <i class="fas fa-unlink text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-semibold text-gray-800">Orphaned Translations</h3>
                                    <p class="text-sm text-gray-600">Find keys used in TSX but missing in messages</p>
                                </div>
                            </div>
                        </a>
                        <a href="?page=jsx-cleanup" class="block p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-all">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-500 text-white">
                                    <i class="fas fa-code text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <h3 class="font-semibold text-gray-800">JSX Cleanup</h3>
                                    <p class="text-sm text-gray-600">Remove unnecessary JSX wrappers</p>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">Recent Translation Activity</h2>
                    <div id="recent-activity" class="space-y-4">
                        <!-- Activity items will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Locale Manager Tab -->
            <div id="locales-tab" data-tab="locales" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="mb-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">Locale Configuration</h2>
                        
                        <!-- Warning Message -->
                        <div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded mb-4">
                            <p class="font-bold">‚ö†Ô∏è Important:</p>
                            <p>Maximum 12 locales can be enabled at once. Enabling too many locales may cause 502 errors.</p>
                            <p class="text-sm mt-2">Currently enabled: <span id="enabled-count" class="font-bold">0</span> / 12</p>
                        </div>

                        <!-- Default Language Selection -->
                        <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Default Language:</label>
                            <div class="flex items-center space-x-4">
                                <select id="default-locale-select" class="form-select rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                                    <!-- Options will be populated dynamically -->
                                </select>
                                <button id="set-default-btn" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all">
                                    Set as Default
                                </button>
                            </div>
                        </div>

                        <!-- Action Buttons with Documentation -->
                        <div class="space-y-4 mb-4">
                            <!-- Save Configuration -->
                            <div class="flex items-start space-x-4">
                                <button id="save-locale-config" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">
                                    <i class="fas fa-save mr-2"></i> Save Configuration
                                </button>
                                <div class="flex-1 text-sm text-gray-600">
                                    <span class="font-semibold">‚úÖ SAFE:</span> Updates .env file with selected locales. Changes NEXT_PUBLIC_LANGUAGES. Requires app restart to take effect.
                                </div>
                            </div>

                            <!-- Sync Translations -->
                            <div class="flex items-start space-x-4">
                                <button id="sync-translations-btn" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-all">
                                    <i class="fas fa-sync mr-2"></i> Sync All Translations
                                </button>
                                <div class="flex-1 text-sm text-gray-600">
                                    <span class="font-semibold">‚úÖ SAFE:</span> Adds missing keys from English to all locales. Never deletes existing translations. Only adds missing keys with English values as placeholders.
                                </div>
                            </div>

                            <!-- Find Bad Keys -->
                            <div class="flex items-start space-x-4">
                                <button id="find-bad-keys-btn" class="bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-lg transition-all">
                                    <i class="fas fa-search mr-2"></i> Find Bad Keys
                                </button>
                                <div class="flex-1 text-sm text-gray-600">
                                    <span class="font-semibold">‚úÖ READ-ONLY:</span> Scans for problematic key names (spaces, special chars, uppercase starts). Does NOT modify any files. Check console for detailed report.
                                </div>
                            </div>

                            <!-- Clean Values -->
                            <div class="flex items-start space-x-4">
                                <button id="clean-values-btn" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg transition-all">
                                    <i class="fas fa-broom mr-2"></i> Clean Values
                                </button>
                                <div class="flex-1 text-sm text-gray-600">
                                    <span class="font-semibold">‚ö†Ô∏è MODIFIES:</span> Fixes formatting issues: trims spaces, converts smart quotes to regular, removes invisible Unicode. Review changes in git after running.
                                </div>
                            </div>
                            
                            <!-- Find Non-Translatable Keys -->
                            <div class="flex items-start space-x-4">
                                <button id="find-non-translatable-btn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all">
                                    <i class="fas fa-ban mr-2"></i> Non-Translatable
                                </button>
                                <div class="flex-1 text-sm text-gray-600">
                                    <span class="font-semibold">üîç IDENTIFIES:</span> Finds keys with values that are just numbers (0, 1, 2), punctuation (), [, }), or other non-translatable content. Can remove them from all locales.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="overflow-x-auto -mx-6 px-6 lg:mx-0 lg:px-0">
                        <div class="inline-block min-w-full align-middle">
                            <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left">
                                        <input type="checkbox" id="select-all-locales" class="rounded">
                                    </th>
                                    <th class="px-4 py-3 text-left">Enabled</th>
                                    <th class="px-4 py-3 text-left">Code</th>
                                    <th class="px-4 py-3 text-left">Language</th>
                                    <th class="px-4 py-3 text-left">Keys</th>
                                    <th class="px-4 py-3 text-left">Missing</th>
                                    <th class="px-4 py-3 text-left">Identical</th>
                                    <th class="px-4 py-3 text-left">Translated</th>
                                    <th class="px-4 py-3 text-left">Progress</th>
                                    <th class="px-4 py-3 text-left">Default</th>
                                    <th class="px-4 py-3 text-left">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="locales-table-body">
                                <!-- Table rows will be populated here -->
                            </tbody>
                        </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Translation Editor Tab -->
            <div id="translations-tab" data-tab="translations" class="tab-content hidden">
                <!-- Modern Header with Stats -->
                <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-2xl p-8 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h2 class="text-3xl font-bold text-white mb-2">Translation Editor</h2>
                            <p class="text-blue-100">Manage and translate your application content with AI assistance</p>
                        </div>
                        <div class="flex items-center justify-end">
                            <div class="grid grid-cols-4 gap-4 text-center">
                                <div class="bg-white bg-opacity-20 rounded-lg p-3">
                                    <div class="text-2xl font-bold text-white" id="translation-stats-total">0</div>
                                    <div class="text-xs text-blue-100">Total</div>
                                </div>
                                <div class="bg-white bg-opacity-20 rounded-lg p-3">
                                    <div class="text-2xl font-bold text-green-300" id="translation-stats-translated">0</div>
                                    <div class="text-xs text-blue-100">Done</div>
                                </div>
                                <div class="bg-white bg-opacity-20 rounded-lg p-3">
                                    <div class="text-2xl font-bold text-yellow-300" id="translation-stats-identical">0</div>
                                    <div class="text-xs text-blue-100">Same</div>
                                </div>
                                <div class="bg-white bg-opacity-20 rounded-lg p-3">
                                    <div class="text-2xl font-bold text-red-300" id="translation-stats-missing">0</div>
                                    <div class="text-xs text-blue-100">Missing</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Progress Bar -->
                    <div class="mt-6">
                        <div class="flex justify-between text-sm text-white mb-2">
                            <span>Translation Progress</span>
                            <span id="translation-progress-percent">0%</span>
                        </div>
                        <div class="w-full bg-white bg-opacity-20 rounded-full h-3">
                            <div id="translation-progress-bar" class="bg-gradient-to-r from-green-400 to-green-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Main Content Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
                    <!-- Left Sidebar - Controls -->
                    <div class="lg:col-span-3">
                        <!-- Locale Selection Card -->
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-bold text-gray-800">Locale</h3>
                                <i class="fas fa-globe text-blue-500"></i>
                            </div>
                            <select id="locale-select" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <!-- Options will be populated here -->
                            </select>
                        </div>

                        <!-- Search and Filter Card -->
                        <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-bold text-gray-800">Filter</h3>
                                <i class="fas fa-filter text-purple-500"></i>
                            </div>
                            
                            <!-- Search Input -->
                            <div class="relative mb-4">
                                <input type="text" id="key-search" placeholder="Search keys or values..." 
                                       class="w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <i class="fas fa-search absolute left-3 top-4 text-gray-400"></i>
                            </div>
                            
                            <!-- Filter Buttons -->
                            <div class="space-y-2">
                                <button data-filter="all" class="w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-all flex items-center justify-between">
                                    <span><i class="fas fa-list mr-2"></i> All Keys</span>
                                    <span class="bg-blue-600 px-2 py-1 rounded text-xs">All</span>
                                </button>
                                <button data-filter="missing" class="w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-red-100 hover:text-red-700 transition-all flex items-center justify-between">
                                    <span><i class="fas fa-exclamation-circle mr-2"></i> Missing</span>
                                    <span class="bg-red-500 text-white px-2 py-1 rounded text-xs">0</span>
                                </button>
                                <button data-filter="identical" class="w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-100 hover:text-yellow-700 transition-all flex items-center justify-between">
                                    <span><i class="fas fa-copy mr-2"></i> Identical</span>
                                    <span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs">0</span>
                                </button>
                                <button data-filter="translated" class="w-full bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-green-100 hover:text-green-700 transition-all flex items-center justify-between">
                                    <span><i class="fas fa-check-circle mr-2"></i> Translated</span>
                                    <span class="bg-green-500 text-white px-2 py-1 rounded text-xs">0</span>
                                </button>
                            </div>
                        </div>

                        <!-- Quick Actions Card -->
                        <div class="bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">Quick Actions</h3>
                            <div class="space-y-2">
                                <label class="flex items-center space-x-2 cursor-pointer">
                                    <input type="checkbox" id="auto-save-translations" class="w-4 h-4 text-blue-600 rounded focus:ring-blue-500">
                                    <span class="text-sm text-gray-700">Auto-save after AI translation</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Center - Translation Keys List with Virtual Scrolling -->
                    <div class="lg:col-span-5">
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-bold text-gray-800">Translation Keys</h3>
                                <div class="text-sm text-gray-500">
                                    <span id="visible-keys-count">0</span> / <span id="total-keys-count">0</span> keys
                                </div>
                            </div>
                            
                            <!-- Virtual Scroll Container -->
                            <div id="translation-keys-list" class="relative">
                                <!-- Virtual scroll content will be rendered here -->
                            </div>
                        </div>
                    </div>

                    <!-- Right - Translation Editor Panel -->
                    <div class="lg:col-span-4">
                        <div id="translation-editor-panel" class="bg-white rounded-xl shadow-lg p-6 sticky top-6 hidden">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg font-bold text-gray-800">Edit Translation</h3>
                                <button onclick="UIUtils.hide('translation-editor-panel')" class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            
                            <!-- Key Path -->
                            <div class="mb-4">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Key Path</label>
                                <div id="current-key-path" class="p-3 bg-gray-50 rounded-lg text-sm font-mono text-gray-700"></div>
                            </div>
                            
                            <!-- English Value -->
                            <div class="mb-4">
                                <label class="block text-xs font-medium text-gray-500 mb-1">English (Source)</label>
                                <div id="current-key-english" class="p-3 bg-blue-50 rounded-lg text-sm text-gray-700 min-h-[60px]"></div>
                            </div>
                            
                            <!-- Translation Input -->
                            <div class="mb-6">
                                <label class="block text-xs font-medium text-gray-500 mb-1">Translation</label>
                                <textarea id="current-key-translation" 
                                          class="w-full p-3 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                                          rows="4"
                                          placeholder="Enter translation..."></textarea>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="flex space-x-2">
                                <button id="save-translation" class="flex-1 bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-lg transition-all font-medium">
                                    <i class="fas fa-save mr-2"></i> Save
                                </button>
                                <button id="ai-translate-key" class="flex-1 bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white px-4 py-3 rounded-lg transition-all font-medium">
                                    <i class="fas fa-robot mr-2"></i> AI Translate
                                </button>
                            </div>
                        </div>

                        <!-- Empty State when no key selected -->
                        <div id="translation-editor-empty" class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl shadow-lg p-12 text-center">
                            <i class="fas fa-language text-6xl text-gray-300 mb-4"></i>
                            <h3 class="text-xl font-semibold text-gray-600 mb-2">No Key Selected</h3>
                            <p class="text-gray-500">Select a translation key from the list to start editing</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- AI Translation Tab -->
            <div id="ai-translate-tab" data-tab="ai-translate" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4">AI Translation with Claude Code</h2>
                    
                    <!-- Documentation Box -->
                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <h3 class="font-semibold text-blue-900 mb-2">üìö How This Works:</h3>
                        <ul class="space-y-2 text-sm text-blue-800">
                            <li>‚Ä¢ <strong>Batch Processing:</strong> Translations are sent to Claude in batches (10-50 keys) to minimize API calls</li>
                            <li>‚Ä¢ <strong>Smart Grouping:</strong> Related keys are grouped together for better context</li>
                            <li>‚Ä¢ <strong>Review Required:</strong> All translations are shown for review before saving</li>
                            <li>‚Ä¢ <strong>Context Preserved:</strong> Placeholders like {name}, %s, %d are maintained</li>
                            <li>‚Ä¢ <strong>Batch Processing:</strong> One API call translates multiple keys at once</li>
                        </ul>
                        <div class="mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded">
                            <p class="text-xs text-yellow-800">
                                <strong>Note:</strong> Claude must be installed and available. Each batch takes 2-5 seconds to process.
                            </p>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-semibold mb-4">Translation Settings</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Target Locales</label>
                                    <div class="flex items-center mb-2">
                                        <input type="checkbox" id="ai-select-all-locales" class="mr-2">
                                        <label for="ai-select-all-locales" class="text-sm font-medium">Select All Locales</label>
                                    </div>
                                    <div id="ai-locale-checkboxes" class="grid grid-cols-3 gap-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg p-2">
                                        <!-- Checkboxes will be populated here -->
                                    </div>
                                    <p class="text-xs text-gray-500 mt-1">Select multiple locales to translate them all at once</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Translation Mode</label>
                                    <select id="ai-mode" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <option value="missing">Only Missing Translations</option>
                                        <option value="identical">Identical Values Only</option>
                                        <option value="both">Missing + Identical</option>
                                        <option value="all">Review All Translations</option>
                                    </select>
                                    <p class="text-xs text-gray-500 mt-1">Missing = keys not in file. Identical = same as English. Both = combines missing and identical.</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Context Priority</label>
                                    <select id="ai-priority" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <option value="high">High Priority Only</option>
                                        <option value="medium">Medium & High Priority</option>
                                        <option value="all">All Priorities</option>
                                    </select>
                                    <p class="text-xs text-gray-500 mt-1">High = user-facing, Medium = settings, Low = technical</p>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Batch Size</label>
                                    <select id="ai-batch-size" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                                        <option value="10">10 keys per batch (recommended)</option>
                                        <option value="25" selected>25 keys per batch</option>
                                        <option value="50">50 keys per batch</option>
                                        <option value="100">100 keys per batch</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold mb-4">Live Translation Progress</h3>
                            <div id="ai-progress-container">
                                <div id="ai-progress-idle" class="text-center text-gray-500 py-8">
                                    <i class="fas fa-robot text-4xl mb-4"></i>
                                    <p>Configure settings and click "Start AI Translation" to begin</p>
                                </div>
                                
                                <div id="ai-progress-active" class="hidden">
                                    <!-- Overall Progress -->
                                    <div class="mb-4">
                                        <div class="flex justify-between text-sm text-gray-600 mb-1">
                                            <span>Overall Progress</span>
                                            <span id="ai-progress-percent">0%</span>
                                        </div>
                                        <div class="w-full bg-gray-200 rounded-full h-3">
                                            <div id="ai-progress-bar" class="bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500" style="width: 0%"></div>
                                        </div>
                                        <div class="flex justify-between text-xs text-gray-500 mt-1">
                                            <span id="ai-progress-count">0 / 0 keys</span>
                                            <span id="ai-progress-time">Time: 0s</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Current Batch -->
                                    <div class="mb-4 p-3 bg-blue-50 rounded-lg">
                                        <div class="text-sm font-medium text-blue-800 mb-1">Current Batch</div>
                                        <div class="text-xs text-blue-600">
                                            <span id="ai-batch-info">Batch 0/0</span>
                                            <span class="mx-2">‚Ä¢</span>
                                            <span id="ai-batch-locale">Locale: --</span>
                                        </div>
                                    </div>
                                    
                                    <!-- Statistics -->
                                    <div class="grid grid-cols-3 gap-2 mb-4">
                                        <div class="text-center p-2 bg-green-50 rounded">
                                            <div class="text-2xl font-bold text-green-600" id="ai-success-count">0</div>
                                            <div class="text-xs text-green-700">Translated</div>
                                        </div>
                                        <div class="text-center p-2 bg-yellow-50 rounded">
                                            <div class="text-2xl font-bold text-yellow-600" id="ai-unchanged-count">0</div>
                                            <div class="text-xs text-yellow-700">Unchanged</div>
                                        </div>
                                        <div class="text-center p-2 bg-red-50 rounded">
                                            <div class="text-2xl font-bold text-red-600" id="ai-error-count">0</div>
                                            <div class="text-xs text-red-700">Errors</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Live Feed -->
                                    <div class="border border-gray-200 rounded-lg p-3">
                                        <div class="text-sm font-medium text-gray-700 mb-2">Live Translation Feed</div>
                                        <div id="ai-live-feed" class="space-y-1 max-h-32 overflow-y-auto text-xs">
                                            <!-- Live updates will appear here -->
                                        </div>
                                    </div>
                                    
                                    <!-- Speed Indicator -->
                                    <div class="mt-3 text-center">
                                        <span class="text-xs text-gray-500">Speed: </span>
                                        <span id="ai-speed" class="text-xs font-medium text-purple-600">-- keys/sec</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-6">
                        <button id="start-ai-translation" class="bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-6 py-3 rounded-lg transition-all">
                            <i class="fas fa-play mr-2"></i> Start AI Translation
                        </button>
                    </div>
                </div>
                
                <!-- Locale Grid View -->
                <div class="mt-8">
                    <h3 class="text-lg font-semibold mb-4">Locale Overview</h3>
                    <div id="ai-locale-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4">
                        <!-- Locale cards will be populated here -->
                    </div>
                </div>
                
                <!-- Active Translations -->
                <div class="mt-8">
                    <h3 class="text-lg font-semibold mb-4">Active Translations</h3>
                    <div id="active-translations-list" class="space-y-4">
                        <!-- Active translation items will be shown here -->
                    </div>
                </div>
            </div>

            <!-- Translation Tools Tab -->
            <div id="tools-tab" data-tab="tools" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-6">
                        <i class="fas fa-tools mr-2"></i> Translation Tools
                    </h2>
                    
                    <div class="max-w-2xl space-y-4">
                        <div class="tool-card">
                            <button class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-4 rounded-lg transition-all tool-btn flex items-center justify-center text-lg font-semibold shadow-lg" data-tool="extract-menu">
                                <i class="fas fa-list mr-3"></i> Extract Menu Translations
                            </button>
                            <p class="text-sm text-gray-600 mt-3 px-2" id="extract-menu-description">
                                <strong class="text-purple-700">NEW!</strong> Automatically extracts all menu titles and descriptions from <code class="bg-gray-100 px-1 rounded">frontend/config/menu.ts</code> and adds them to all locale files. Generates translation keys in format: <code class="bg-gray-100 px-1 rounded">menu.{key}.{field}</code>
                            </p>
                        </div>

                        <div class="tool-card">
                            <button class="w-full bg-red-600 hover:bg-red-700 text-white px-6 py-4 rounded-lg transition-all tool-btn flex items-center justify-center text-lg font-semibold" data-tool="missing">
                                <i class="fas fa-search mr-3"></i> Find Missing Translations
                            </button>
                            <p class="text-sm text-gray-600 mt-3 px-2" id="missing-description">
                                Scans your codebase to find translation keys that are used in the code but missing from translation files. Also identifies orphaned keys that exist in translation files but are not used anywhere in the code.
                            </p>
                        </div>

                        <div class="tool-card">
                            <button class="w-full bg-yellow-600 hover:bg-yellow-700 text-white px-6 py-4 rounded-lg transition-all tool-btn flex items-center justify-center text-lg font-semibold" data-tool="duplicates">
                                <i class="fas fa-copy mr-3"></i> Find Duplicate Values
                            </button>
                            <p class="text-sm text-gray-600 mt-3 px-2" id="duplicates-description">
                                Scans all translation files to find duplicate values across different keys. This helps identify redundant translations that could be consolidated to improve consistency.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Tool Results -->
                <div id="tool-results" class="mt-6 bg-white rounded-lg shadow-lg p-6 hidden">
                    <h3 class="text-lg font-bold text-gray-800 mb-4">Tool Results</h3>
                    <div id="tool-results-content">
                        <!-- Results will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- Untranslatable Tab -->
            <div id="untranslatable-tab" data-tab="untranslatable" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">
                            <i class="fas fa-ban text-orange-600 mr-2"></i>Untranslatable Text Scanner
                        </h2>
                        <div class="text-sm text-gray-600">
                            Find and clean texts that should not be translated
                        </div>
                    </div>
                    
                    <!-- Pattern Configuration -->
                    <div class="mb-6 p-4 bg-gray-50 rounded-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="font-semibold text-gray-800">Pattern Configuration</h3>
                            <div class="space-x-2">
                                <button id="add-custom-pattern" class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-sm">
                                    <i class="fas fa-plus mr-1"></i>Add Pattern
                                </button>
                                <button id="refresh-patterns" class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-sm">
                                    <i class="fas fa-sync mr-1"></i>Refresh
                                </button>
                            </div>
                        </div>
                        <div id="pattern-config-list" class="space-y-2 max-h-48 overflow-y-auto">
                            <!-- Pattern list will be rendered here -->
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div class="flex gap-4 mb-6">
                        <button id="scan-untranslatable" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">
                            <i class="fas fa-search mr-2"></i>Scan for Untranslatable
                        </button>
                        <button id="clean-selected-untranslatable" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-broom mr-2"></i>Clean Selected
                        </button>
                        <button id="clean-all-untranslatable" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-trash-alt mr-2"></i>Clean All
                        </button>
                        <button id="clear-untranslatable" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-times mr-2"></i>Clear Results
                        </button>
                        <label class="ml-auto flex items-center gap-2">
                            <input type="checkbox" id="select-all-untranslatable" disabled>
                            <span>Select All</span>
                        </label>
                    </div>
                    
                    <!-- Filters -->
                    <div class="flex gap-4 mb-6">
                        <input type="text" id="search-untranslatable" placeholder="Search patterns..." 
                               class="flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500">
                        <select id="type-filter-untranslatable" class="p-2 border border-gray-300 rounded-lg">
                            <option value="">All Types</option>
                            <option value="URL">URLs</option>
                            <option value="EMAIL">Emails</option>
                            <option value="NUMBER">Numbers</option>
                            <option value="CODE">Code</option>
                            <option value="PLACEHOLDER">Placeholders</option>
                            <option value="CUSTOM">Custom</option>
                        </select>
                    </div>
                    
                    <!-- Stats -->
                    <div id="untranslatable-stats" class="grid grid-cols-4 gap-4 mb-6" style="display: none;">
                        <div class="bg-gray-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-gray-800" id="untranslatable-total">0</div>
                            <div class="text-sm text-gray-600">Total Found</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-blue-600" id="untranslatable-types">0</div>
                            <div class="text-sm text-gray-600">Pattern Types</div>
                        </div>
                        <div class="bg-orange-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-orange-600" id="untranslatable-files">0</div>
                            <div class="text-sm text-gray-600">Files Affected</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-green-600" id="untranslatable-selected">0</div>
                            <div class="text-sm text-gray-600">Selected</div>
                        </div>
                    </div>
                    
                    <!-- Results -->
                    <div id="untranslatable-loading" class="text-center py-8" style="display: none;">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
                        <p class="text-gray-600">Scanning for untranslatable texts...</p>
                    </div>
                    
                    <div id="untranslatable-empty" class="text-center py-8 text-gray-500">
                        <i class="fas fa-search text-4xl mb-4"></i>
                        <h3 class="text-lg font-semibold mb-2">No Scan Results Yet</h3>
                        <p>Click "Scan for Untranslatable" to find texts that should not be translated.</p>
                    </div>
                    
                    <div id="untranslatable-results" class="space-y-2" style="display: none;">
                        <!-- Results will be rendered here -->
                    </div>
                </div>
            </div>

            <!-- Activity Logs Tab -->
            <!-- Orphaned Translations Tab -->
            <div id="orphaned-tab" data-tab="orphaned" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">
                            <i class="fas fa-unlink text-red-600 mr-2"></i>Orphaned Translations Scanner
                        </h2>
                        <div class="text-sm text-gray-600">
                            Find keys used in TSX files but missing from message files
                        </div>
                    </div>
                    
                    <div class="flex gap-4 mb-6">
                        <button id="scan-orphaned" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">
                            <i class="fas fa-search mr-2"></i>Scan for Orphaned Keys
                        </button>
                        <button id="restore-orphaned" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-plus mr-2"></i>Add Selected to Messages
                        </button>
                        <button id="clean-orphaned" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-semibold px-4 py-2 rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-broom mr-2"></i>Clean Selected from TSX
                        </button>
                        <button id="clear-orphaned" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-trash mr-2"></i>Clear Results
                        </button>
                        <label class="ml-auto flex items-center gap-2">
                            <input type="checkbox" id="select-all-orphaned" disabled>
                            <span>Select All</span>
                        </label>
                    </div>
                    
                    <!-- Stats -->
                    <div id="orphaned-stats" class="grid grid-cols-4 gap-4 mb-6" style="display: none;">
                        <div class="bg-gray-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-gray-800" id="orphaned-files">0</div>
                            <div class="text-sm text-gray-600">TSX Files Scanned</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-blue-600" id="orphaned-total-keys">0</div>
                            <div class="text-sm text-gray-600">Message Keys</div>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-red-600" id="orphaned-count">0</div>
                            <div class="text-sm text-gray-600">Orphaned Keys</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-green-600" id="orphaned-selected">0</div>
                            <div class="text-sm text-gray-600">Selected</div>
                        </div>
                    </div>
                    
                    <!-- Messages -->
                    <div id="orphaned-success" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4" style="display: none;"></div>
                    <div id="orphaned-error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4" style="display: none;"></div>
                    
                    <!-- Results -->
                    <div id="orphaned-loading" class="text-center py-8" style="display: none;">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
                        <p class="text-gray-600">Scanning TSX files for orphaned translations...</p>
                    </div>
                    
                    <div id="orphaned-empty" class="text-center py-8 text-gray-500">
                        <i class="fas fa-search text-4xl mb-4"></i>
                        <h3 class="text-lg font-semibold mb-2">No Scan Results Yet</h3>
                        <p>Click "Scan for Orphaned Keys" to find translation keys used in TSX files but missing from message files.</p>
                    </div>
                    
                    <div id="orphaned-results" style="display: none;">
                        <div class="mb-4 flex gap-4">
                            <input type="text" id="orphaned-filter" placeholder="Filter by key..." class="flex-1 p-2 border border-gray-300 rounded-lg">
                            <select id="orphaned-namespace" class="p-2 border border-gray-300 rounded-lg">
                                <option value="">All Namespaces</option>
                            </select>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse">
                                <thead>
                                    <tr class="bg-gray-50">
                                        <th class="border p-2 text-left w-10">
                                            <input type="checkbox" id="orphaned-table-select-all">
                                        </th>
                                        <th class="border p-2 text-left">Namespace</th>
                                        <th class="border p-2 text-left">Key</th>
                                        <th class="border p-2 text-left">Suggested Value</th>
                                        <th class="border p-2 text-left">Files</th>
                                    </tr>
                                </thead>
                                <tbody id="orphaned-tbody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JSX Cleanup Tab -->
            <div id="jsx-cleanup-tab" data-tab="jsx-cleanup" class="tab-content hidden">
                <div class="bg-white rounded-lg shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-xl font-bold text-gray-800">
                            <i class="fas fa-code text-blue-600 mr-2"></i>JSX Expression Cleanup
                        </h2>
                        <div class="text-sm text-gray-600">
                            Remove unnecessary JSX expression wrappers like {'text'} ‚Üí text
                        </div>
                    </div>
                    
                    <div class="flex gap-4 mb-6">
                        <button id="scan-jsx" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">
                            <i class="fas fa-search mr-2"></i>Scan for Wrapped Strings
                        </button>
                        <button id="clean-jsx" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-magic mr-2"></i>Clean Selected
                        </button>
                        <button id="clean-all-jsx" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-broom mr-2"></i>Clean All
                        </button>
                        <button id="clear-jsx" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fas fa-trash mr-2"></i>Clear Results
                        </button>
                        <label class="ml-auto flex items-center gap-2">
                            <input type="checkbox" id="select-all-jsx" disabled>
                            <span>Select All</span>
                        </label>
                    </div>
                    
                    <!-- Stats -->
                    <div id="jsx-stats" class="grid grid-cols-4 gap-4 mb-6" style="display: none;">
                        <div class="bg-gray-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-gray-800" id="jsx-files-scanned">0</div>
                            <div class="text-sm text-gray-600">Files Scanned</div>
                        </div>
                        <div class="bg-blue-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-blue-600" id="jsx-total-found">0</div>
                            <div class="text-sm text-gray-600">Wrapped Strings Found</div>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-yellow-600" id="jsx-unique-values">0</div>
                            <div class="text-sm text-gray-600">Unique Values</div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg text-center">
                            <div class="text-2xl font-bold text-green-600" id="jsx-selected">0</div>
                            <div class="text-sm text-gray-600">Selected</div>
                        </div>
                    </div>
                    
                    <!-- Messages -->
                    <div id="jsx-success" class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4" style="display: none;"></div>
                    <div id="jsx-error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4" style="display: none;"></div>
                    
                    <!-- Results -->
                    <div id="jsx-loading" class="text-center py-8" style="display: none;">
                        <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"></div>
                        <p class="text-gray-600">Scanning TSX/JSX files for unnecessary expression wrappers...</p>
                    </div>
                    
                    <div id="jsx-empty" class="text-center py-8 text-gray-500">
                        <i class="fas fa-code text-4xl mb-4"></i>
                        <h3 class="text-lg font-semibold mb-2">No Scan Results Yet</h3>
                        <p>Click "Scan for Wrapped Strings" to find JSX expressions like {'text'} that can be simplified.</p>
                    </div>
                    
                    <div id="jsx-results" style="display: none;">
                        <div class="mb-4 flex gap-4">
                            <input type="text" id="jsx-filter" placeholder="Filter by value..." class="flex-1 p-2 border border-gray-300 rounded-lg">
                            <select id="jsx-file-filter" class="p-2 border border-gray-300 rounded-lg">
                                <option value="">All Files</option>
                            </select>
                        </div>
                        
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse">
                                <thead>
                                    <tr class="bg-gray-50">
                                        <th class="border p-2 text-left w-10">
                                            <input type="checkbox" id="jsx-table-select-all">
                                        </th>
                                        <th class="border p-2 text-left">Value</th>
                                        <th class="border p-2 text-left">Current</th>
                                        <th class="border p-2 text-left">Replacement</th>
                                        <th class="border p-2 text-left">Files</th>
                                        <th class="border p-2 text-left">Count</th>
                                    </tr>
                                </thead>
                                <tbody id="jsx-tbody">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Tracker Tab -->
        </main>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-4 right-4 z-50 space-y-2 pointer-events-none"></div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 hidden">
        <div class="bg-white rounded-lg p-8 text-center">
            <div class="animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"></div>
            <p class="text-gray-700">Processing...</p>
        </div>
    </div>

    <!-- Load utility and service files first -->
    <script src="client/utils/initialization-guard.js"></script>
    <script src="client/utils/ui-utils.js"></script>
    <script src="client/services/websocket-client.js"></script>
    <script src="client/services/api-client.js"></script>
    <script src="client/services/router.js"></script>
    
    <!-- Load component files -->
    <script src="client/components/dashboard.js"></script>
    <script src="client/components/progress-tracker.js"></script>
    
    <!-- Load tab files -->
    <script src="client/components/tabs/simple-tabs.js"></script>
    <script src="client/components/tabs/dashboard.tab.js"></script>
    <script src="client/components/tabs/locales.tab.js"></script>
    <script src="client/components/tabs/translation-editor.tab.js"></script>
    <script src="client/components/tabs/ai-translate.tab.js"></script>
    <script src="client/components/tabs/untranslatable.tab.js"></script>
    <script src="client/components/tabs/comparison.tab.js"></script>
    <script src="client/components/tabs/orphaned.tab.js"></script>
    <script src="client/components/tabs/jsx-cleanup.tab.js"></script>
    <script src="client/components/tabs/tools.tab.js"></script>
    
    <!-- Load main app file last -->
    <script src="app.js?v=3.3"></script>
    </div>
</body>
</html>